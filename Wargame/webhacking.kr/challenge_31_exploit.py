#-*-coding:utf-8-*-

from socket import *
from select import *

servers = []
bufferSize = 1024
portlist = list(range(10000, 10101))

for port in portlist:
    ds = ("0.0.0.0", port)

    server = socket(AF_INET, SOCK_STREAM)
    server.setsockopt(SOL_SOCKET, SO_REUSEADDR, 1)
    server.bind(ds)
    server.listen(1)

    servers.append(server)

while True:
    readable,_,_ = select(servers, [], [])
    ready_server = readable[0]

    connection, address = ready_server.accept()
    data = connection.recv(bufferSize)
    print(data)